<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <record id="estate_property_list_view" model="ir.ui.view">
      <field name="name">estate.property.list</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <list decoration-info="state == 'Offer Received'"
          decoration-success="state == 'Offer Accepted'" decoration-muted="state == 'Sold'"
          string="Estate Properties">
          <field name="name" />
          <field name="postcode" />
          <field name="tags_ids" widget="many2many_tags"
            options="{'color_field': 'color', 'no_create': True}" />
          <field name="bedrooms" />
          <field name="living_area" />
          <field name="expected_price" />
          <field name="selling_price" />
          <field name="date_availability" optional="hide" />
          <field name="state" optional="hide" />
        </list>
      </field>
    </record>

    <record id="estate_property_form_view" model="ir.ui.view">
      <field name="name">estate.property.form</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <form string="Property Form">
          <header>
            <button name="action_cancel_property" string="Cancel" type="object"
              invisible="state in ['Sold', 'Cancelled']" />
            <button name="action_sold_property" string="Sold" type="object"
              invisible="state in ['Sold', 'Cancelled']" />
            <field name="state" widget="statusbar"
              statusbar_visible="New,Offer Received,Offer Accepted,Sold" />
          </header>
          <sheet>
            <h1>
              <field name="name" />
            </h1>
            <field name="tags_ids" widget="many2many_tags"
              options="{'color_field': 'color', 'no_create': True}" />

            <group>
              <group>
                <field name="property_type_id" options="{'no_create': True, 'no_edit': True}" />
                <field name="postcode" />
                <field name="date_availability" />
              </group>
              <group>
                <field name="expected_price" />
                <field name="selling_price" />
                <field name="best_price" />
              </group>
            </group>

            <notebook>
              <page string="Description">
                <group>
                  <field name="description"
                    placeholder="Enter detailed description..." />
                  <field name="bedrooms" />
                  <field name="living_area" />
                  <field name="facades" />
                  <field name="garage" />
                  <field name="garden" />
                  <field name="garden_area" invisible="not garden" />
                  <field name="garden_orientation" invisible="not garden" />
                  <field name="total_area" />
                </group>
              </page>
              <page string="Offers">
                <group>
                  <field name="offer_ids"
                    readonly="state in ['Offer Accepted', 'Sold', 'Cancelled']" nolabel="1" />
                </group>
              </page>
              <page string="Other Info">
                <group>
                  <field name="salesperson" />
                  <field name="buyer" />
                </group>
              </page>
            </notebook>
          </sheet>
        </form>
      </field>
    </record>

    <record id="estate_property_search_view" model="ir.ui.view">
      <field name="name">estate.property.search</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <search>
          <field name="name" />
          <field name="postcode" />
          <field name="expected_price" />
          <field name="bedrooms" />
          <field name="living_area" />
          <field name="facades" />
          <filter
            name="new_or_offer"
            string="New or Offer Received"
            domain="['|', ('state', '=', 'New'), ('state', '=', 'Offer Received')]"
          />
          <field name="living_area" string="Minimum Living Area (mÂ²)"
            filter_domain="[('living_area', '>=', self)]" />
          <filter
            name="available"
            string="Available"
            domain="[('state','not in',['Sold','Cancelled'])]"
          />
          <group expand="0" string="Group By">
            <filter
              name="group_by_postcode"
              string="Postcode"
              context="{'group_by':'postcode'}"
            />
          </group>
        </search>
      </field>
    </record>

    <record id="estate_property_kanban_view" model="ir.ui.view">
      <field name="name">estate.property.kanban</field>
      <field name="model">estate.property</field>
      <field name="arch" type="xml">
        <kanban>
          <field name="expected_price" />
          <field name="offer_ids" />
          <field name="selling_price" />
          <field name="tags_ids" />
          <field name="state" />
          <templates>
            <t t-name="kanban-box">
              <div class="oe_kanban_global_click">
                <field name="name" />
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record id="estate_property_action" model="ir.actions.act_window">
      <field name="name">Properties</field>
      <field name="res_model">estate.property</field>
      <field name="view_mode">kanban,list,form</field>
      <field name="context">{'search_default_available': True}</field>
    </record>
  </data>
</odoo>